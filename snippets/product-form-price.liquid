{% comment %}
  @param product {Product}

  @param variant {Variant}

  @param form {ProductForm}

  @param class {String}
{% endcomment %}

<div class="product-details__price-container" {{ block.shopify_attributes }}>
  <div class="product-price">
    <span class="
        product-price__minimum
        money
        {% if variant.compare_at_price > variant.price %}product-price__minimum--sale{% endif %}
      "
      data-product-price
    >
      {% if onboarding %}
        {{ 1999 | money }}
      {% elsif product != blank %}
        {{ variant.price | money }}
      {% endif %}
    </span>

    <s
      class="
        product-price__compare
        money
        {% if product.compare_at_price_min <= variant.price %}
          product-price__compare--hidden
        {% endif %}
      "
      data-product-price-compare
    >
      {% if variant.compare_at_price > variant.price %}
        {{ variant.compare_at_price | money }}
      {% endif %}
    </s>
  </div>

  {% capture total_quantity %}<span data-total-quantity>{{ variant.unit_price_measurement.quantity_value }}{{ variant.unit_price_measurement.quantity_unit }}</span>{% endcapture %}
  {% capture unit_price %}<span data-unit-price-amount>{{ variant.unit_price | money }}</span>{% endcapture %}
  {% capture unit_measure %}<span data-unit-price-measure>{%- if variant.unit_price_measurement.reference_value != 1 -%}{{ variant.unit_price_measurement.reference_value }}{%- endif %}{{ variant.unit_price_measurement.reference_unit }}</span>{% endcapture %}

  <div
    class="
      product-details__unit-price
      accent-text
      {% unless variant.unit_price_measurement %}product-details__unit-price--hidden{% endunless %}
    "
    data-unit-price
  >
    {{ 'product.unit_pricing.price_per_unit_html' | t: total_quantity: total_quantity, unit_price: unit_price, unit_measure: unit_measure | strip_newlines }}
  </div>

  {%- capture tax_text -%}
    {{ 'product.phrases.tax_line_html' | t }}
  {%- endcapture -%}

  {%- if tax_text != blank -%}
    <div class="
        product-details__tax-label
        accent-text
        {% unless variant.taxable %}product-details__tax-label--hidden{% endunless %}
      "
      data-tax-line
    >
      {{ tax_text }}
    </div>
  {%- endif -%}

  <div data-payment-terms-reference>
    {{ form | payment_terms }}
  </div>
</div>
