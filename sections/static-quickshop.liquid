{% liquid
  assign enable_zoom = section.settings.gallery_image_zoom
  assign variant = product.selected_or_first_available_variant
%}

<script
  type="application/json"
  data-section-type="static-quickshop"
  data-section-id="{{ section.id }}"
  data-section-data
  data-data
>
  {
    "product": {{ product | json }},
    "gallery_image_zoom": {{ enable_zoom | json }},
    "gallery_video_autoplay": {{ section.settings.gallery_video_autoplay | json }},
    "gallery_video_looping": {{ section.settings.gallery_video_looping | json }},
    "enable_cart_redirection": {{ settings.enable_cart_redirection | json }},
    "addToCartText": {{ 'product.add_to_cart.submit' | t | json }},
    "enableHistory": false,
    "linkedOptions": true,
    "soldOutText": {{ 'product.add_to_cart.sold_out' | t | json }},
    "unavailableText": {{ 'product.add_to_cart.unavailable' | t | json }},
    "atc_message_success": {{ 'product.add_to_cart.success_html' | t | json }},
    "atc_cart_link": {{ 'product.add_to_cart.cart_link' | t | json }},
    "atc_continue_shopping": {{ 'general.continue_shopping' | t | json }},
    "atc_checkout_link": {{ 'product.add_to_cart.checkout_link' | t | json }},
    "generic_error_message": {{ 'product.phrases.generic_error' | t | json }},
    "error_message_unauthorized": {{ 'product.add_to_cart.error_message_unauthorized' | t | json }}
  }
</script>

<section class="modal-loaded modal-visible">
  <div class="modal modal--quickshop">
    <div class="modal-inner" data-html>
      {%
        render 'product',
        product: product,
        show_payment_button: settings.show_payment_button,
        enable_zoom: enable_zoom,
        variant: variant,
        is_quickshop: true,
      %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "t:sections.quick_shop.name",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.product.header_1.content"
    },
    {
      "type": "paragraph",
      "content": "t:sections.product.paragraph.content"
    },
    {
      "type": "checkbox",
      "id": "gallery_image_zoom",
      "label": "t:sections.product.gallery_image_zoom.label"
    },
    {
      "type": "checkbox",
      "id": "gallery_video_autoplay",
      "label": "t:sections.product.gallery_video_autoplay.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "gallery_video_looping",
      "label": "t:sections.product.gallery_video_looping.label",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "custom_liquid",
      "name": "t:sections.product.blocks.custom_liquid.name",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "t:sections.product.blocks.custom_liquid.custom_liquid.label",
          "info": "t:sections.product.blocks.custom_liquid.custom_liquid.info"
        }
      ]
    },
    {
      "type": "inventory_status",
      "name": "t:sections.product.blocks.inventory_status.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "inventory_status",
          "label": "t:sections.product.blocks.inventory_status.inventory_status.label",
          "options": [
            {
              "value": "low_stock_only",
              "label": "t:sections.product.blocks.inventory_status.inventory_status.option_1"
            },
            {
              "value": "always",
              "label": "t:sections.product.blocks.inventory_status.inventory_status.option_2"
            }
          ],
          "default" : "always"
        },
        {
          "type": "select",
          "id": "quantity_status",
          "label": "t:sections.product.blocks.inventory_status.quantity_status.label",
          "options": [
            {
              "value": "always",
              "label": "t:sections.product.blocks.inventory_status.quantity_status.option_1"
            },
            {
              "value": "low_stock_only",
              "label": "t:sections.product.blocks.inventory_status.quantity_status.option_2"
            },
            {
              "value": "never",
              "label": "t:sections.product.blocks.inventory_status.quantity_status.option_3"
            }
          ],
          "default" : "always"
        },
        {
          "type": "range",
          "id": "low_stock_threshold",
          "label": "t:sections.product.blocks.inventory_status.low_stock_threshold.label",
          "info": "t:sections.product.blocks.inventory_status.low_stock_threshold.info",
          "min": 0,
          "max": 20,
          "step": 1,
          "default": 2
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.inventory_status.header_1.content"
        },
        {
          "type": "checkbox",
          "id": "inventory_status_bar",
          "label": "t:sections.product.blocks.inventory_status.inventory_status_bar.label",
          "default": true
        },
        {
          "type": "text",
          "id": "initial_stock_level",
          "label": "t:sections.product.blocks.inventory_status.initial_stock_level.label",
          "info": "t:sections.product.blocks.inventory_status.initial_stock_level.info",
          "default": "20"
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.inventory_status.header_2.content"
        },
        {
          "type": "checkbox",
          "id": "inventory_transfer_notice",
          "label": "t:sections.product.blocks.inventory_status.inventory_transfer_notice.label",
          "info": "t:sections.product.blocks.inventory_status.inventory_transfer_notice.info",
          "default": false
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "vendor",
      "name": "Vendor",
      "limit": 1
    },
    {
      "type": "variant_selection",
      "name": "t:sections.product.blocks.variant_selection.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_labels",
          "label": "t:sections.product.blocks.variant_selection.show_labels.label"
        }
      ]
    },
    {
      "type": "price",
      "name": "t:sections.product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "quantity",
      "name": "t:sections.product.blocks.quantity.name",
      "limit": 1
    },
    {
      "type": "price_and_quantity",
      "name": "t:sections.product.blocks.price_and_quantity.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.product.blocks.price_and_quantity.paragraph.content"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.product.blocks.text.name",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "t:sections.product.blocks.text.text.label",
          "default": "<p>Text block</p>"
        }
      ]
    },
    {
      "type": "description",
      "name": "t:sections.product.blocks.description.name",
      "limit": 1
    },
    {
      "type": "form",
      "name": "t:sections.product.blocks.form.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.product.blocks.form.paragraph.content"
        }
      ]
    },
    {
      "type": "share",
      "name": "t:sections.product.blocks.share.name",
      "limit": 1
    },
    {
      "type": "gallery",
      "name": "t:sections.product.blocks.gallery.name",
      "limit": 1
    },
    {
      "type": "rating",
      "name": "t:sections.product.blocks.rating.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.product.blocks.rating.paragraph.content"
        }
      ]
    },
    {
      "type": "badges",
      "name": "t:sections.product.blocks.badges.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "display_sale_soldout_badge",
          "label": "t:sections.product.blocks.badges.display_sale_soldout_badge.label",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "display_custom_badge",
          "label": "t:sections.product.blocks.badges.display_custom_badge.label",
          "info": "t:sections.product.blocks.badges.display_custom_badge.info",
          "default": true
        }
      ]
    }
  ]
}

{% endschema %}